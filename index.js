let cushionCoversIdList = [

"Abstract Japanese Face", 4528870785157,
"Abstract Japanese Face 2", 4528873504901,
"The Great Wave Off Kanagawa by hokusai Japanese art waves sea painting", 4528881238149,
"The Great Wave Off Kanagawa 2 by hokusai Japanese art waves sea painting", 4675787292805,
"The Great Wave Off Kanagawa 3 by hokusai Japanese art waves sea painting", 4675794534533,
"Japanese abstract art waves koi carp fish", 4613042471045,
"Japanese cat art", 4528799350917,
"Japanese cat fishing wave art", 4612991910021,
"Japanese Crane birds Silhouettes art", 4528813703301,
"Japanese Crane and fans birds art", 4594670698629,
"Japanese Crane and fans birds 2 art", 4675793420421,
"Japanese Cranes and volcano birds art", 4613030772869,
"Japanese Cranes at night birds art", 4613025497221,
"Japanese Cranes flying birds art", 4594699239557,
"Japanese Cranes on water lake birds art", 4594688327813,
"Japanese fans of fire art", 4612959633541,
"Japanese fans collage pattern art", 4613036966021,
"Japanese fans collage pattern art 2", 4528829792389,
"Japanese waves collage pattern art", 4675794894981,
"Japanese flowers fans collage pattern art 2", 4528826613893,
"Japanese girl woman pink floral flowers blossom tree blue", 4528817406085,
"Japanese girl woman green umbrella", 4528816029829,
"Japanese girl woman hot pink flowers", 4528837066885,
"Japanese girl woman purple pink floral flowers blossom tree", 4528819142789,
"Japanese girl woman green fan bird", 4528821436549,
"Japanese girl woman orange fan", 4528822780037,
"Japanese girl woman hot pink flowers", 4528833003653,
"Japanese horse art", 4612985553029,
"Japanese horse art 2", 4612995776645,
"Japanese orange Koi Carp fish and Waves swimming sea water art", 4613002068101,
"Japanese orange Koi Carps fish in a stream swimming water Art", 4594749505669,
"Japanese modern orange koi carp purple fish art", 4613007278213,
"Japanese pair of fish two koi carps art", 4528831529093,
"Japanese modern girl woman purple art", 4612998529157,
"Japanese man with and octopus sea wave fan", 4528883236997,
"Japanese outdoor scene house building art", 4675805970565,
"Japanese pink blossom art trees flowers art", 4675794731141,
"Japanese Woman and Mountains art", 4613014814853,
"Japanese Woman in pink art", 4612970348677,
"Japanese Woman reading art", 4613010358405,
"Japanese two women woman waves art", 4613019533445,
"Colourful Japanese art Mountains", 4675785425029,
"Vintage Japanese art collage", 4528828055685,
"Cat Bus my neighbour neighbor totoro studio Ghibli", 4635865940101,
"Cat Bus stop my neighbour neighbor totoro studio Ghibli", 4591565996165,
"my neighbour neighbor totoro studio Ghibli vintage Christmas santa", 4591550922885,
"my neighbour neighbor totoro studio Ghibli vintage Christmas santa", 4591391146117,
"Futuristic totoro my neighbour neighbor studio Ghibli", 4591596306565,
"Hugging totoro my neighbour neighbor studio Ghibli", 4591555248261,
"Multicolour colourful totoro my neighbour neighbor studio Ghibli art", 4591372894341,
"Soot sprites dust bunny susuwatari neighbor totoro spirited away studio Ghibli", 4635871805573,
"my neighbour neighbor totoro and mini studio Ghibli", 4674578448517,
"my neighbour neighbor totoro characters no face spirit collage studio Ghibli", 4674572320901,
"my neighbour neighbor totoro characters teapot tea pot no face spirit collage studio Ghibli", 4591440691333,
"my neighbour neighbor totoro studio Ghibli grey face", 4674580906117,
"my neighbour neighbor totoro studio Ghibli green forest silhouette", 4591399960709,
"my neighbour neighbor totoro and mini studio Ghibli in the desert", 4591585493125,
"my neighbour neighbor totoro and mini moon silhouette studio Ghibli black and white", 4591401009285,
"my neighbour neighbor totoro and mini moon silhouette studio Ghibli", 4591603384453,
"my neighbour neighbor totoro and mini studio Ghibli green", 4591580315781,
"my neighbour neighbor totoro in the sky clouds umbrella", 4591402221701,
"my neighbour neighbor totoro in the sky clouds umbrella balloons", 4649459417221,

"my neighbour neighbor totoro sitting under a tree with flowers", 4635929510021,
"my neighbour neighbor totoro sitting under a tree vintage with soot sprites dust bunnies bunny susuwatari", 4591575498885,
"totoro my neighbour neighbor studio Ghibli with mini totoro 2 (2) blue", 4591378464901,
"my neighbour neighbor totoro and mini studio Ghibli blue", 4591571370117,
"my neighbour neighbor totoro and mini studio Ghibli outline", 4591376564357,
"my neighbour neighbor totoro and mini studio Ghibli sketch", 4649402138757,
"my neighbour neighbor totoro totoros with mini studio Ghibli sketch", 4591608922245,
"my neighbour neighbor totoro totoros with mini studio green Ghibli sketch 2 (2)", 4591600828549,
"my neighbour neighbor totoro studio Ghibli blue doctor dr who police box Tardis", 4591387672709,
"my neighbour neighbor totoro vintage sepia art sketch raining rain with umbrella", 4591588704389,
"my neighbour neighbor totoro totoros and mini studio Ghibli aqua green blue watercolour art watercolor", 4591381512325,
"Arryn As High As Honor Game Of Thrones Great Houses of Westeros house", 4560671867013,
"Baratheon Ours Is The Fury Game Of Thrones Great Houses of Westeros house", 4560688971909,
"Bolton Our Blades Are Sharp Game Of Thrones Great Houses of Westeros house", 4560683663493,
"Greyjoy We Do Not Sow Game Of Thrones Great Houses of Westeros house", 4560696737925,
"Martell Unbowed Unbent Unbroken Game Of Thrones Great Houses of Westeros house", 4560693297285,
"Lannister Hear Me Roar Game Of Thrones Great Houses of Westeros house", 4560678944901,
"Targaryen Fire And Blood Game Of Thrones Great Houses of Westeros house", 4560677798021,
"Tully Family Duty Honor Game Of Thrones Great Houses of Westeros house", 4560676388997,
"Stark Winter Is Coming light 2 Game Of Thrones Great Houses of Westeros house", 4673207795845,
"Stark Winter Is Coming dark Game Of Thrones Great Houses of Westeros house", 4560700702853,
"C-3PO C3PO C3P0 c-3p0 Star Wars cartoon character yellow", 4560705683589,
"R2-D2 r2 d2 r2d2 Star Wars cartoon character blue", 4560719839365,
"Yoda baby Star Wars cartoon character green", 4560749133957,
"Storm trooper stormtrooper Star Wars cartoon character white", 4560737140869,
"Star Wars character black logo movie film", 4560727933061,
"Star Wars set of all 5 characters black logo movie film C-3PO C3PO C3P0 c-3p0 R2-D2 r2 d2 r2d2 baby Yoda stormtrooper storm trooper", 4706852798597,
"DeLorean De Lorean Stormtroopers storm troopers Star Wars back to the future car character", 4599390470277,
"Star Wars little Darth Vader balloon Banksy art character", 4599357735045,
"Star Wars Paisley Darth Vader retro art character", 4599381557381,
"Star Wars stormtrooper storm trooper retro art character", 4599386243205,
"Friends central perk park coffee cup", 4700033581189,
"Friends how you doin’? Doin? Doing? Doin doin’ doing joey quote", 4700026404997,
"Friends logo letters", 4700013133957,
"Rick and morty art", 4700174385285,
"Rick and morty collage art", 4700076540037,
"Rick and morty in space art", 4700103606405,
"Rick and morty minimalist art", 4700150300805
"Rick and Morty Poopybutthole poopy butt hole butthole art", 4700154790021,
"Rick and Morty Silhouette art", 4700141617285,
"Rick and Morty Silhouette 2 art", 4700084928645,
"Alice in Wonderland Late White Rabbit Lewis Carrol carol caroll carroll", 4623962472581,
"Alice in Wonderland evil White Rabbit Lewis Carrol carol caroll carroll", 4623958343813,
"You and me two pair of cactuses cactus floral green plant plants pot potted", 4620974948485,
"Banana leaf leaves tropical green plant floral plants", 4696833163397,
"Cactus cactuses and teardrop pattern floral green collage plant plants", 4620972195973,
"Cactus potted pot cactuses pattern green floral collage plant plants", 4651005116549,
"Cactus potted pot cactuses pattern floral 2 green collage plant plants", 4651009376389,
"Cactus potted pot cactuses pattern floral 3 green collage plant plants", 4721800216709,
"Cactus potted pot cactuses pattern floral 4 green collage plant plants", 4721804836997,
"Cactus potted pot cactuses pattern floral (grey) green collage plant plants", 4624271442053,
"Cactus potted pot cactuses pattern floral grey (green) green collage plant plants", 4624272949381,
"Cactus plant art painting with floral flowers", 4620973375621,
"Cactus plant art painting with floral flowers", 4620973834373,
"Spiky green Cactus plant floral", 4691085426821,
"Spiky green Cactus 2 plant floral", 4691092275333,
"Succulent green plant floral", 4691083264133,
"Succulent 2 green plant floral", 4691103907973,
"vintage floral pattern flowers", 4696501518469,
"vintage floral 2 pattern flowers", 4696508072069,
"vintage floral 3 pattern flowers", 4696510824581,
"vintage floral 4 pattern flowers", 4696513970309,
"vintage floral 5 pattern flowers", 4696516919429,
"vintage floral 6 pattern flowers", 4696519409797,
"vintage floral 7 rose roses pattern flowers", 4696521572485,
"vintage floral 8 pattern pink purple flowers", 4696524161157,
"vintage floral 9 pattern flowers", 4696526717061,
"vintage floral 10 pattern flowers", 4696533008517,
"Dark colourful leaf leaves pattern floral collage plant plants", 4621458636933,
"Light natural colourful leaf leaves floral pattern collage plant plants", 4621459751045,
"Minimalist dandelion wish wishing floral flower plant plants", 4696847286405,
"Minimalist 2 two dandelion dandelions floral wish wishing flower plant plants", 4712228421765,
"Cactus dark cactuses pattern floral watercolour art plant plants", 4691072876677,
"Cactus green cactuses pattern floral watercolour art plant plants", 4691076087941,
"Dotted banana leaf leaves floral green plant plants blue art collage", 4621462143109,
"Dotted banana leaf leaves floral green plant plants art collage", 4621463453829,
"Dotted banana leaf  leaves  floral green plant pink plants art collage", 4621465190533,
"leaf leaves green plant floral plants pattern collage", 4651015635077,
"Multicolour colourful floral cactus surreal", 4624259219589,
"Tropical palm tree trees silhouette", 4696850727045,
"Tropical flamingo flamingoes flamingos and flowers birds pink floral tropical jungle leaf and leaves plants plant flowers collage", 4696721031301,
"Tropical flamingo flamingoes flamingos birds pink tropical jungle floral banana leaf and leaves plants plant collage", 4607930171525,
"Tropical flamingo flamingoes flamingos birds pink tropical jungle floral banana leaf 4 and leaves plants plant collage", 4620980748421,
"Tropical flamingo flamingoes flamingos birds pink tropical jungle floral banana and 2 leaf leaves plants plant collage", 4620981960837,
"Tropical flamingo flamingoes flamingos birds pink tropical jungle floral banana and 3 leaf leaves plants plant collage", 4693553643653,
"Tropical flamingo flamingoes flamingos birds pink tropical jungle floral banana and 5 leaf leaves plants plant collage", 4621433110661,
"Tropical flamingo flamingoes flamingos birds pink tropical jungle floral banana and 6 leaf leaves plants plant collage", 4654195048581,
"Tropical butterfly butterflies tropical jungle leaf leaves plants floral plant collage", 4523938414725,
"Pink and orange Flowers tropical colourful leaf leaves plants plant collage floral", 4591121301637,
"Tropical parrot birds and flowers jungle plants plant flowers floral", 4696729026693,
"Tropical parrot birds and leaves floral jungle plants plant flowers floral", 4696734466181,
"Floral Flowers plants plant collage floral design 4", 4523941298309,
"Floral Flowers plants plant collage floral design 5", 4523943329925,
"Floral pink blue tree", 4608463601797,



  "", ""
  // these empty strings is required as the final element because the last element in the array sometimes gets added to the search results for an unknown reason
  ];


let searchEntryStr;
let uniqueResults;
let nameArray;
let loadingAnimation = document.getElementById('loading');
let collectionComponent = document.getElementById('collection-component')



  // converting all the strings in the cushionCoversIdList array to lowercase
  for(i=0; i<cushionCoversIdList.length; i++) {
    if(typeof cushionCoversIdList[i] === "string") {
      let lowercaseName = cushionCoversIdList[i].toLowerCase();
      cushionCoversIdList.splice(i, 1, lowercaseName);
    }
  }




// controlling appearance of searchbar
const searchBar = document.getElementById('search-field');
const whiteness = document.getElementById('whiteness');
searchBar.addEventListener("click", makeSearchBarBrighter);
searchBar.addEventListener("focusout", makeSearchBarDuller);
function makeSearchBarBrighter() {
    whiteness.style.opacity = "0.84";
    searchBar.style.color = "rgb(0,0,0,0.73)";
}
function makeSearchBarDuller() {
    whiteness.style.opacity = "0";
}




// hiding the collection component for certain pages, and changing the styling of the search suggestions for certain pages
if(pageID === "Home" || pageID === "Browse By Category" || pageID === "Animals") {
    document.getElementById('collection-component').style.display = "none";
    document.getElementById('large-white-box').style.display = "none";
    document.getElementById("search-results").style.backdropFilter = "blur(40px)";
    document.getElementById("search-results").style.backgroundColor = "rgb(0,0,0,0.05)";
}




// controlling the mouseover behaviour of the buttons in the top right of the screen
let shippingCircle = document.getElementById('shipping-circle');
let contactCircle = document.getElementById('contact-circle');
let facebookCircle = document.getElementById('instagram-circle');
shippingCircle.addEventListener("mouseover", onMouseoverShippingCircle);
shippingCircle.addEventListener("mouseleave", onMouseleaveShippingCircle);
contactCircle.addEventListener("mouseover", onMouseoverContactCircle);
contactCircle.addEventListener("mouseleave", onMouseleaveContactCircle);
function onMouseoverShippingCircle() {
    hideContactCircle();
    // hideFacebookCircle();
    shippingCircle.style.background = "rgb(210,237,246)";
    shippingCircle.style.transition = "clip-path 0.67s 100ms ease-in-out, background 500ms 0s ease-in-out";
}
function onMouseleaveShippingCircle() {
    showContactCircle();
    // showFacebookCircle();
    shippingCircle.style.background = "0";
    shippingCircle.style.transition = "clip-path 0.8s ease-in-out, background 550ms 0.35s ease-in-out";
}
function onMouseoverContactCircle() {
    hideFacebookCircle();
    contactCircle.style.background = "rgb(210,237,246)";
    contactCircle.style.transition = "clip-path 0.67s 100ms ease-in-out, background 500ms 0s ease-in-out";
}
function onMouseleaveContactCircle() {
    showFacebookCircle();
    contactCircle.style.background = "0";
    contactCircle.style.transition = "clip-path 0.8s ease-in-out, background 550ms 0.35s ease-in-out";
}
function hideContactCircle() {
    contactCircle.style.opacity = "0";
    contactCircle.style.transition = "clip-path 0.8s ease-in-out, opacity 0.15s ease-in-out, background 1s ease-in-out";
}
function showContactCircle() {
    contactCircle.style.opacity = "1";
    contactCircle.style.transition = "clip-path 0.8s ease-in-out, opacity 0.4s 0.3s ease, background 1s ease-in-out";
}
function hideFacebookCircle() {
    facebookCircle.style.opacity = "0";
    facebookCircle.style.transition = "opacity 0.15s ease-in-out, background 0.2s ease-in-out";
}
function showFacebookCircle() {
    facebookCircle.style.opacity = "1";
    facebookCircle.style.transition = "opacity 0.4s 0.3s ease, background 0.2s ease-in-out";
}




// controlling what happens when a user clicks one of the search suggestions
let searchResult1 = document.getElementById('search-result-1');
let searchResult2 = document.getElementById('search-result-2');
let searchResult3 = document.getElementById('search-result-3');
let searchResult4 = document.getElementById('search-result-4');
let searchResult5 = document.getElementById('search-result-5');
let searchResult6 = document.getElementById('search-result-6');
let searchResult7 = document.getElementById('search-result-7');
searchResult1.style.display = "none";
searchResult2.style.display = "none";
searchResult3.style.display = "none";
searchResult4.style.display = "none";
searchResult5.style.display = "none";
searchResult6.style.display = "none";
searchResult7.style.display = "none";
document.getElementById("search-result-1").addEventListener("click", grabAndSearch);
document.getElementById("search-result-2").addEventListener("click", grabAndSearch);
document.getElementById("search-result-3").addEventListener("click", grabAndSearch);
document.getElementById("search-result-4").addEventListener("click", grabAndSearch);
document.getElementById("search-result-5").addEventListener("click", grabAndSearch);
document.getElementById("search-result-6").addEventListener("click", grabAndSearch);
document.getElementById("search-result-7").addEventListener("click", grabAndSearch);
document.body.addEventListener('click', searchResultCloser);
function grabAndSearch(e) {
    var searchSuggestion = e.target.innerHTML;
    searchBar.value = searchSuggestion;
    searchEntryStr = searchSuggestion;
    runSearch();
    displaySearch();
    searchResultCloser();
}
function searchResultCloser(){
    searchResult1.style.display = "none";
    searchResult2.style.display = "none";
    searchResult3.style.display = "none";
    searchResult4.style.display = "none";
    searchResult5.style.display = "none";
    searchResult6.style.display = "none";
    searchResult7.style.display = "none";
    searchBar.style.borderRadius = "10px";
    whiteness.style.borderRadius = "10px";
}




// controlling when the footer is displayed
let footer = document.getElementById('footer');
if(pageID === "Shipping & Payment" || pageID === "About Us" || pageID === "Contact" || pageID === "Cookies Policy") {
    footer.style.display = "block";
}
// the following ResizeObserver ensures that the footer only loads after the products have loaded. It observes a change in height of
// the collectionComponent when the products load
const observer = new ResizeObserver(entries => {
    for (let entry of entries) {
      if(entry.contentRect.height > 0) {
        footer.style.display = "block";
      }
    }
});
observer.observe(collectionComponent);




searchBar.addEventListener('keyup', performSearch);   
function performSearch(e) {
    runSearch();
    var x = e.keyCode;

    if (x === 13) {
        displaySearch();
        searchResultCloser();
    }
}
function runSearch() {
    searchEntryStr = searchBar.value;
    const searchEntryStrLowerCase = searchEntryStr.toLowerCase();
    const searchEntryArr = searchEntryStrLowerCase.split(' ');
    var searchResultsProductNames = [];
    var searchResultsProductIds = [];
    var finalSearchResults = [];

    for(i=0; i<cushionCoversIdList.length; i+=2) {
        let cushionName = cushionCoversIdList[i];
        let cushionId = cushionCoversIdList[i+1];

        for(j=0; j<searchEntryArr.length; j++) {
            let searchWord = searchEntryArr[j];
            if(cushionName.indexOf(searchWord) != -1){
                searchResultsProductNames.push(cushionName);
                searchResultsProductNames.push(cushionId);
            }
        }

        for(j=0; j<searchEntryArr.length; j++) {
            for(k=0; k<searchResultsProductNames.length; k+=2) {
                let searchWord = searchEntryArr[j];
                let searchResult = searchResultsProductNames[k];
                if(searchResult.indexOf(searchWord) === -1) {
                  searchResultsProductNames.splice(k, 2);
                }
            }
        }
    }

    // remove duplicate search results
    uniqueResults = [...new Set(searchResultsProductNames)];
    nameArray = [...uniqueResults];

    // remove IDs from the array so that it just contains the product names
    for(i=nameArray.length; i>=0; i--) {
      if(typeof nameArray[i] === "number") {
        nameArray.splice(i,1);

        if(i>14) {
          nameArray.splice(i,1);
        }
      }
    }

    // remove product names from the array so that it just contains the product IDs
    for(i=0; i<uniqueResults.length; i++) {
      if(typeof uniqueResults[i] === "string") {
        uniqueResults.splice(i,1);
      }
    }

    searchResult1.innerHTML = nameArray[0];
    searchResult2.innerHTML = nameArray[1];
    searchResult3.innerHTML = nameArray[2];
    searchResult4.innerHTML = nameArray[3];
    searchResult5.innerHTML = nameArray[4];
    searchResult6.innerHTML = nameArray[5];
    searchResult7.innerHTML = nameArray[6];


    if(nameArray.length === 0) {
      searchResultCloser();      
    }
    if(nameArray.length === 1) {
      searchResult1.style.display = "block";
      searchResult2.style.display = "none";
      searchResult3.style.display = "none";
      searchResult4.style.display = "none";
      searchResult5.style.display = "none";
      searchResult6.style.display = "none";
      searchResult7.style.display = "none";
    }
    if(nameArray.length === 2) {
      searchResult1.style.display = "block";
      searchResult2.style.display = "block";
      searchResult3.style.display = "none";
      searchResult4.style.display = "none";
      searchResult5.style.display = "none";
      searchResult6.style.display = "none";
      searchResult7.style.display = "none";
    }
    if(nameArray.length === 3) {
      searchResult1.style.display = "block";
      searchResult2.style.display = "block";
      searchResult3.style.display = "block";
      searchResult4.style.display = "none";
      searchResult5.style.display = "none";
      searchResult6.style.display = "none";
      searchResult7.style.display = "none";
    }
    if(nameArray.length === 4) {
      searchResult1.style.display = "block";
      searchResult2.style.display = "block";
      searchResult3.style.display = "block";
      searchResult4.style.display = "block";
      searchResult5.style.display = "none";
      searchResult6.style.display = "none";
      searchResult7.style.display = "none";
    }
    if(nameArray.length === 5) {
      searchResult1.style.display = "block";
      searchResult2.style.display = "block";
      searchResult3.style.display = "block";
      searchResult4.style.display = "block";
      searchResult5.style.display = "block";
      searchResult6.style.display = "none";
      searchResult7.style.display = "none";
    }
    if(nameArray.length === 6) {
      searchResult1.style.display = "block";
      searchResult2.style.display = "block";
      searchResult3.style.display = "block";
      searchResult4.style.display = "block";
      searchResult5.style.display = "block";
      searchResult6.style.display = "block";
      searchResult7.style.display = "none";
    }
    if(nameArray.length >= 7) {
      searchResult1.style.display = "block";
      searchResult2.style.display = "block";
      searchResult3.style.display = "block";
      searchResult4.style.display = "block";
      searchResult5.style.display = "block";
      searchResult6.style.display = "block";
      searchResult7.style.display = "block";
    }
    if(nameArray.length >= 1) {
      searchBar.style.borderRadius = "10px 10px 0px 0px";
      whiteness.style.borderRadius = "10px 10px 0px 0px";
    }
    if(searchEntryStr.length === 0) {
      searchResultCloser();
    }
}


document.getElementById("search-icon").addEventListener('click', displaySearch);

function displaySearch() {

    footer.style.display = "none";
    footer.style.top = "186px";
    loadingAnimation.style.display = "block";
    loadingAnimation.style.top = "120px";
    searchBar.style.color = "rgb(0,0,0,0.5";
    document.getElementById("search-results").style.backdropFilter = "blur(60px)";
    document.getElementById("search-results").style.backgroundColor = "rgb(0,0,0,0.15)";
    document.getElementById('text-container').style.display = "none"; 

    if(pageID === "Home" || pageID === "Browse By Category" || pageID === "Shipping & Payment" || pageID === "Animals" || pageID === "About Us" || pageID === "Contact" || pageID === "Cookies Policy") {
          document.getElementById('collection-component').style.display = "block";
          document.getElementById('large-white-box').style.display = "block";
    }

    if(pageID === "Browse By Category" || pageID === "Animals") {
          document.getElementById('browse-page-contents').style.display = "none";
    }

    if(pageID === "Home") {
          document.getElementById('homepage-contents').style.display = "none";
    }

    if(pageID === "Shipping & Payment" || pageID === "About Us" || pageID === "Contact" || pageID === "Cookies Policy") {
          document.getElementById('shipping-page-contents').style.display = "none";
    }


    // what happens if no search results are found
    if(uniqueResults.length === 0) {
      loadingAnimation.style.display = "none";
      document.getElementById('breadcrumbs').style.visibility = "hidden";
      document.getElementById('search-results-text').innerHTML = "";
      document.getElementById('search-results-text-unsuccessful').style.display = "block";
      document.getElementById('go-back-message').style.display = "block";
      document.getElementById('go-back-message').innerHTML = '<i class="fa fa-chevron-left" aria-hidden="true"></i>' + '&nbsp;' + 'Back to ' + pageID;
      document.getElementById('search-results-text-unsuccessful').innerHTML = 
      `<span id="sorry">Sorry we couldn't find anything to match your search  <br>"` + searchEntryStr + '"</span>' 
      + "<br><br><br>Can't find what you're looking for? <br>Why not <a href='create-your-own.html' id='create-your-own'>Create Your Own?</a>";
      document.getElementById('footer').style.display = "block";
      document.getElementById('footer').style.top = "572px";
      document.getElementById('go-back').setAttribute('href', pageLink);
    }

    // display text showing how many search results were found
    if(uniqueResults.length > 0) {
      document.getElementById('search-results-text-unsuccessful').innerHTML = "";
      document.getElementById('search-results-text-unsuccessful').style.display = "none";
    }

    let results = "results";

    if(uniqueResults.length === 1) {
      results = "result";
    }

    // clear the screen before rendering content
    document.getElementById('collection-component').innerHTML = "";

    let productSetOrCollection = "productSet"

    if(searchEntryStr.length === 0) {
        uniqueResults = collectionID;
        productSetOrCollection = "collection";
        document.getElementById('breadcrumbs').style.visibility = "visible";
        document.getElementById('go-back-message').style.display = "none";
        document.getElementById('search-results-text').innerHTML = "";
        document.getElementById('text-container').style.display = "block";   
        footer.style.display = "block";

      if(pageID === "Home" || pageID === "Browse By Category" || pageID === "Animals") {
        document.getElementById('breadcrumbs').style.visibility = "hidden";
        document.getElementById('go-back-message').style.display = "none";
        document.getElementById('search-results-text').innerHTML = "";
        document.getElementById('text-container').style.display = "none"; 
        document.getElementById('collection-component').style.display = "none";
        document.getElementById('large-white-box').style.display = "none";
        footer.style.display = "none";
      }

      if(pageID === "Browse By Category" || pageID === "Animals") {
            document.getElementById('browse-page-contents').style.display = "block";
      }

      if(pageID === "Home") {
            document.getElementById('homepage-contents').style.display = "block";
      }

      if(pageID === "Shipping & Payment" || pageID === "About Us" || pageID === "Contact" || pageID === "Cookies Policy") {
        document.getElementById('shipping-page-contents').style.display = "block";
        document.getElementById('go-back-message').style.display = "none";
        document.getElementById('search-results-text').innerHTML = "";
        document.getElementById('text-container').style.display = "none"; 
      }
  }

    // function to load search results
    if(uniqueResults.length>0) {
      (function () {
          document.getElementById('go-back-message').style.display = "none";
          if(searchEntryStr) {
              document.getElementById('search-results-text').innerHTML = 'Showing ' + uniqueResults.length + 
              ' search ' + results + ' for "' + searchEntryStr + '"';

              document.getElementById('breadcrumbs').style.visibility = "hidden";
          }
          else {
              document.getElementById('search-results-text').innerHTML = "";
          }
          var scriptURL = 'https://sdks.shopifycdn.com/buy-button/latest/buy-button-storefront.min.js';
          if (window.ShopifyBuy) {
            if (window.ShopifyBuy.UI) {
              ShopifyBuyInit();
            } else {
              loadScript();
            }
          } else {
            loadScript();
          }
          function loadScript() {
            script = document.createElement('script');
            script.async = true;
            script.src = scriptURL;
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(script);
            // script.onprogress = loading();
            script.onload = ShopifyBuyInit;
          }
          function ShopifyBuyInit() {
            var client = ShopifyBuy.buildClient({
              domain: 'spacebutterflyuk.myshopify.com',
              storefrontAccessToken: '38f835659431459cebffcd078fa762c4',
            });
            ShopifyBuy.UI.onReady(client).then(function (ui) {
              ui.createComponent(productSetOrCollection, {
                id: uniqueResults,
                node: document.getElementById('collection-component'),
                moneyFormat: '%C2%A3%7B%7Bamount%7D%7D',
                options: {
          "product": {
            "styles": {
              "user-select": "none",
              "product": {
                "@media (min-width: 601px)": {
                  "max-width": "calc(33.33333% - 30px)",
                  "margin-left": "30px",
                  "margin-bottom": "50px",
                  "width": "calc(33.33333% - 30px)"
                },
                "img": {
                  "height": "calc(100% - 15px)",
                  "position": "absolute",
                  "left": "0",
                  "right": "0",
                  "top": "0"
                },
                "imgWrapper": {
                  "padding-top": "calc(75% + 15px)",
                  "position": "relative",
                  "height": "0"
                }
              },
              "title": {
                "font-family": "futura, sans-serif",
                "color": "#1e3264",
                "font-weight": "400",
                "font-size": "18px"
              },
              "button": {
                // "opacity": "0",
                "font-family": "futura, sans-serif",
                "font-weight": "bold",
                "color": "white",
                "font-size": "12px",
                ":hover": {
                  "color": "#115500",
                  "background-color": "#0f4d00"
                },
                "background-color": "black",
                ":focus": {
                  "background-color": "#0f4d00"
                },
                "border-radius": "1px",
                "padding-left": "15px",
                "padding-right": "15px"
              },
              "price": {
                "font-family": "futura, sans-serif",
                // "font-weight": "bold",
                "color": "#1e3264"
              },
              "compareAt": {
                "font-family": "futura, sans-serif",
                // "font-weight": "bold",
                "color": "#1e3264"
              },
              "unitPrice": {
                "font-family": "futura, sans-serif",
                "font-weight": "bold",
                "color": "#1e3264"
              },
              "description": {
                "font-family": "futura, sans-serif",
                "color": "#c92929"
              },
            },
            "buttonDestination": "modal",
            "contents": {
              "options": false,
              "button": false,
            },
                  "isButton": "true",


            "text": {
              "button": "View product"
            },

            "googleFonts": [
              "futura"
            ]
          },
          "productSet": {
            "styles": {
              "products": {
                "@media (min-width: 601px)": {
                  "margin-left": "-30px"
                }
              }
            }
          },
          "modalProduct": {
            "contents": {
              "img": false,
              "imgWithCarousel": true
            },
            "styles": {
              "product": {
                "@media (min-width: 601px)": {
                  "max-width": "100%",
                  "margin-left": "0px",
                  "margin-bottom": "0px",
                  "user-select": "none"
                }
              },
              "img": {
                "width": "400px",
              },
              "button": {
                // "background-image": "linear-gradient(to right, #eea2a2 0%, #bbc1bf 19%, #57c6e1 42%, #b49fda 79%, #7ac5d8 100%);",
                "border": "2px solid rgb(17,17,17)",
                "font-size": "12px",
                // "font-weight": "500",
                "font-family": "futura, sans-serif",
                "color": "white",
                ":hover": {
                  "color": "rgb(17,17,17)",
                  "background-color": "white"
                },
                "background-color": "rgb(17,17,17)",
                ":focus": {
                  "background-color": "rgb(17,17,17)"
                },
                "border-radius": "0px",
                "padding-left": "45px",
                "padding-right": "45px",
              },
              "title": {
                "font-family": "futura, sans-serif",
                "font-size": "26px",
                "font-weight": "normal",
                "color": "#1e3264"
              },
              "price": {
                "font-family": "futura, sans-serif",
                "font-size": "16px",
                "color": "#1e3264"
              },
              "compareAt": {
                "font-family": "futura, sans-serif",
                "font-size": "12px",
                "color": "#1e3264"
              },
              "unitPrice": {
                "font-family": "futura, sans-serif",
                "color": "#1e3264"
              },
              "description": {
                "font-family": "futura, sans-serif",
                "font-size": "16px",
                "color": "#1e3264"
              }
            },
            "googleFonts": [
              "futura"
            ],
            "text": {
              "button": "ADD TO CART",
            }
          },
          "modal": {
            "styles": {
              "modal": {
                // "outline": "10px solid red",
                "user-select": "none",
                "background-color": "white",
                // "border": "30px solid black",
                "border-radius": "15px",
                "box-shadow": "0px 0px 100px rgba(0,0,0,0.2)"

              }
            }
          },
          "cart": {
            "styles": {
              "button": {
                "font-family": "futura, sans-serif",
                // "font-weight": "bold",
                "color": "white",
                ":hover": {
                  "color": "#black",
                  "background-color": "#black"
                },
                "background-color": "rgb(0,0,0,0.9)",
                ":focus": {
                  "background-color": "black"
                },
                "border-radius": "0px"
              },
              "title": {
                "color": "#353535"
              },
              "header": {
                "color": "#353535"
              },
              "lineItems": {
                "color": "#353535"
              },
              "subtotalText": {
                "color": "#353535"
              },
              "subtotal": {
                "color": "#353535"
              },
              "notice": {
                "color": "#353535"
              },
              "currency": {
                "color": "#353535"
              },
              "close": {
                "color": "#353535",
                ":hover": {
                  "color": "#353535"
                }
              },
              "empty": {
                "color": "#353535"
              },
              "noteDescription": {
                "color": "#353535"
              },
              "discountText": {
                "color": "#353535"
              },
              "discountIcon": {
                "fill": "#353535"
              },
              "discountAmount": {
                "color": "#353535"
              }
            },
            "text": {
              "total": "Subtotal",
              "button": "Checkout"
            },
            "googleFonts": [
              "futura"
            ]
          },
          "toggle": {
            "styles": {
              "toggle": {
                "font-family": "futura, sans-serif",
                // "font-weight": "bold",
                "background-color": "#c3f0c8",
                "border-radius": "0px",
                // "position": "fixed",
                // "top": "-100px",
                ":hover": {
                "background-color": "#c3f0c8",
                "filter": "brightness(1.1)"
                },
                ":focus": {
                  "background-color": "#0f4d00"
                }
              },
              "count": {
                "color": "#1e3264",
              },
              "iconPath": {
                "fill": "#1e3264"
              }
            },
            "googleFonts": [
              "futura"
            ]
          },
          "lineItem": {
            "styles": {
              "variantTitle": {
                "color": "#353535"
              },
              "title": {
                "color": "#353535"
              },
              "price": {
                "color": "#353535"
              },
              "fullPrice": {
                "color": "#353535"
              },
              "discount": {
                "color": "#353535"
              },
              "discountIcon": {
                "fill": "#353535"
              },
              "quantity": {
                "color": "#353535"
              },
              "quantityIncrement": {
                "color": "#353535",
                "border-color": "#353535"
              },
              "quantityDecrement": {
                "color": "#353535",
                "border-color": "#353535"
              },
              "quantityInput": {
                "color": "#353535",
                "border-color": "#353535"
              }
            }
          }
        },
              });
            });
          }
        })();

// The following curly brace goes with the if statement that wraps around the IIFE
}

// The following curly brace and bracket go with the keydown event listener
};




// the following IIFE initiliases the shopify component

(function () {

          if(pageID != "Home" && pageID != "Browse By Category" && pageID != "Animals" && pageID != "Shipping & Payment" && pageID != "About Us" && pageID != "Contact") {
              loadingAnimation.style.display = "block";
          }

          var scriptURL = 'https://sdks.shopifycdn.com/buy-button/latest/buy-button-storefront.min.js';
          if (window.ShopifyBuy) {
            if (window.ShopifyBuy.UI) {
              ShopifyBuyInit();
            } else {
              loadScript();
            }
          } else {
            loadScript();
          }
          function loadScript() {
            // function loading() {
          // document.getElementById('collection-component').innerHTML = "Loading";
            // }
            script = document.createElement('script');
            script.async = true;
            script.src = scriptURL;
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(script);
            // script.onprogress = loading();
            script.onload = ShopifyBuyInit;
          }
          function ShopifyBuyInit() {
                document.getElementById('collection-component').innerHTML = "";

            // (document.getElementsByTagName('head')[0]).replaceChild(script, "0");
            var client = ShopifyBuy.buildClient({
              domain: 'spacebutterflyuk.myshopify.com',
              storefrontAccessToken: '38f835659431459cebffcd078fa762c4',
            });
            ShopifyBuy.UI.onReady(client).then(function (ui) {
              // ui.replaceComponent('productSet');
              ui.createComponent('productSet', {
                id: collectionID,
                node: document.getElementById('collection-component'),
                moneyFormat: '%C2%A3%7B%7Bamount%7D%7D',
                options: {
          "product": {
            "styles": {
              "user-select": "none",
              "product": {
                "@media (min-width: 601px)": {
                  "max-width": "calc(33.33333% - 30px)",
                  "margin-left": "30px",
                  "margin-bottom": "50px",
                  "width": "calc(33.33333% - 30px)"
                },
                "img": {
                  "height": "calc(100% - 15px)",
                  "position": "absolute",
                  "left": "0",
                  "right": "0",
                  "top": "0"
                },
                "imgWrapper": {
                  "padding-top": "calc(75% + 15px)",
                  "position": "relative",
                  "height": "0"
                }
              },
              "title": {
                "font-family": "futura, sans-serif",
                "color": "#1e3264",
                "font-weight": "400",
                "font-size": "18px"
              },
              "button": {
                // "opacity": "0",
                "font-family": "futura, sans-serif",
                // "font-weight": "bold",
                "color": "black",
                "font-size": "15px",
                ":hover": {
                  "color": "white",
                  "background-color": "black"
                },
                "background-color": "white",
                ":focus": {
                  "color": "white",
                  "background-color": "black",
                  "outline": "0",
                },
                "border-radius": "4px",
                "border": "2px solid black",
                "padding-left": "15px",
                "padding-right": "15px",
              },
              "price": {
                "font-family": "futura, sans-serif",
                // "font-weight": "bold",
                "color": "#1e3264"
              },
              "compareAt": {
                "font-family": "futura, sans-serif",
                // "font-weight": "bold",
                "color": "#1e3264"
              },
              "unitPrice": {
                "font-family": "futura, sans-serif",
                "font-weight": "bold",
                "color": "#1e3264"
              },
              "description": {
                "font-family": "futura, sans-serif",
                "color": "#c92929"
              },
            },
            "buttonDestination": "modal",
            "contents": {
              "options": false,
              "button": false,
            },
                  "isButton": "true",


            "text": {
              "button": "View product"
            },

            "googleFonts": [
              "futura"
            ]
          },
          "productSet": {
            "styles": {
              "products": {
                "@media (min-width: 601px)": {
                  "margin-left": "-30px"
                }
              }
            }
          },
          "modalProduct": {
            "contents": {
              "img": false,
              "imgWithCarousel": true
            },
            "styles": {
              "product": {
                "@media (min-width: 601px)": {
                  "max-width": "100%",
                  "margin-left": "0px",
                  "margin-bottom": "0px",
                  "user-select": "none"
                }
              },
              // "img": {
              //   "width": "400px",
              // },
              "button": {
                // "position": "absolute",
                // "bottom": "100px",
                // "background-image": "linear-gradient(to right, #eea2a2 0%, #bbc1bf 19%, #57c6e1 42%, #b49fda 79%, #7ac5d8 100%);",
                "border": "2px solid rgb(17,17,17)",
                "font-size": "12px",
                // "font-weight": "500",
                "font-family": "futura, sans-serif",
                "color": "white",
                ":hover": {
                  "color": "rgb(17,17,17)",
                  "background-color": "white"
                },
                "background-color": "rgb(17,17,17)",
                ":focus": {
                  "background-color": "rgb(17,17,17)"
                },
                ":active": {
                  "background-color": "rgb(17,17,17)"
                },
                "border-radius": "0px",
                "padding-left": "45px",
                "padding-right": "45px",
              },
              "title": {
                "font-family": "futura, sans-serif",
                "font-size": "26px",
                "font-weight": "normal",
                "color": "#1e3264"
              },
              "price": {
                "font-family": "futura, sans-serif",
                "font-size": "16px",
                "color": "#1e3264"
              },
              "compareAt": {
                "font-family": "futura, sans-serif",
                "font-size": "12px",
                "color": "#1e3264"
              },
              "unitPrice": {
                "font-family": "futura, sans-serif",
                "color": "#1e3264"
              },
              "description": {
                "font-family": "futura, sans-serif",
                "font-size": "16px",
                "color": "#1e3264"
              }
            },
            "googleFonts": [
              "futura"
            ],
            "text": {
              "button": "ADD TO CART",
            }
          },
          "modal": {
            "styles": {
              "modal": {
                // "user-select": "none",
                "background-color": "white",
                // "border": "30px solid black",
                // "border-radius": "15px",
                // "box-shadow": "0px 0px 100px rgba(0,0,0,0.2)"

              }
            }
          },
          "cart": {
            "styles": {
              "button": {
                "font-family": "futura, sans-serif",
                // "font-weight": "bold",
                "color": "white",
                ":hover": {
                  "color": "white",
                  "background-color": "black"
                },
                "background-color": "rgb(0,0,0,0.9)",
                ":focus": {
                  "background-color": "black"
                },
                "border-radius": "0px"
              },
              "title": {
                "color": "#353535"
              },
              "header": {
                "color": "#353535"
              },
              "lineItems": {
                "color": "#353535"
              },
              "subtotalText": {
                "color": "#353535"
              },
              "subtotal": {
                "color": "#353535"
              },
              "notice": {
                "color": "#353535"
              },
              "currency": {
                "color": "#353535"
              },
              "close": {
                "color": "#353535",
                ":hover": {
                  "color": "#353535"
                }
              },
              "empty": {
                "color": "#353535"
              },
              "noteDescription": {
                "color": "#353535"
              },
              "discountText": {
                "color": "#353535"
              },
              "discountIcon": {
                "fill": "#353535"
              },
              "discountAmount": {
                "color": "#353535"
              }
            },
            "text": {
              "total": "Subtotal",
              "button": "Checkout"
            },
            "googleFonts": [
              "futura"
            ]
          },
          "toggle": {
            "styles": {
              "toggle": {
                "font-family": "futura, sans-serif",
                // "font-weight": "bold",
                "background-color": "#c3f0c8",
                "border-radius": "0px",
                // "position": "fixed",
                // "top": "-100px",
                ":hover": {
                "background-color": "#c3f0c8",
                "filter": "brightness(1.1)"
                },
                ":focus": {
                  "background-color": "#0f4d00"
                }
              },
              "count": {
                "color": "#1e3264",
              },
              "iconPath": {
                "fill": "#1e3264"
              }
            },
            "googleFonts": [
              "futura"
            ]
          },
          "lineItem": {
            "styles": {
              "variantTitle": {
                "color": "#353535"
              },
              "title": {
                "color": "#353535"
              },
              "price": {
                "color": "#353535"
              },
              "fullPrice": {
                "color": "#353535"
              },
              "discount": {
                "color": "#353535"
              },
              "discountIcon": {
                "fill": "#353535"
              },
              "quantity": {
                "color": "#353535"
              },
              "quantityIncrement": {
                "color": "#353535",
                "border-color": "#353535"
              },
              "quantityDecrement": {
                "color": "#353535",
                "border-color": "#353535"
              },
              "quantityInput": {
                "color": "#353535",
                "border-color": "#353535"
              }
            }
          }
        },

              });
            }); 
          }
        })();






