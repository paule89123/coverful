let cushionCoversIdList = [
  "Albert Einstein", 4503008018565,
  "Bruce Lee", 4503012933765,
  "Charlie Chaplin", 4503001727109,
  "Che Guevara", 4503005560965,
  "Ghandi", 4503010476165,
  "Mark Zuckerberg", 4503018307717,
  "Morgan Freeman", 4503016669317,
  "Mr Bean", 4502983803013,
  "Nicholas Cage", 4502995927173,

  "Bacon", 4517497995397,
  "Bananas", 4517505466501,
  "Beers", 4517509628037,
  "Brunch Ice Lollies", 4517610291333,
  "Burger", 4517593940101,
  "Burgers", 4517591974021,
  "Chocolate Cake", 4517622579333,
  "Chocolate Donuts", 4517516574853,
  "Chocolate Ice Cream", 4517590171781,
  "Double Popsicle (Design 1)", 4517625692293,
  "Double Popsicle (Design 2)", 4517627134085,
  "Coke Float", 4517599445125,
  "Glazed Donuts", 4517601247365,
  "Orange Creamsicle", 4517618057349,
  "Pizza Slices", 4517480923269,
  "Rainbow Popsicle", 4517620318341,
  "Rainbow Snow Cone", 4517479219333,
  "Strawberry Ice Creams", 4517450088581,
  "Toast (Design 1)", 4517499961477,
  "Toast (Design 2)", 4517501436037,
  "Various Ice Creams", 4517462081669,

  "Aaargh Pop Art", 4523652808837,
  "Arrgh Pop Art", 4523675156613,
  "Bam Pop Art", 4523688820869,
  "Bang Pop Art", 4523693179013,
  "Boom Pop Art", 4523658707077,
  "If The Shoe Fits Pop Art", 4585510142085,
  "Kapow Pop Art", 4523723653253,
  "OMG! Love it! Pop Art", 4585508077701,
  "Pow (Design 1) Pop Art", 4523729223813,
  "Pow (Design 2) Pop Art", 4523731910789,
  "Wham Pop Art", 4523668340869,
  "Yeah Pop Art", 4523736006789,
  "Audrey Hepburn Blue Bubblegum", 4599342530693,
  "Colourful Lips - Pop Art", 4585549004933,
  "Marilyn Monroe Drawing", 4599348658309,
  "Marilyn Monroe Pink Bubblegum", 4599336042629,
  "Marilyn Monroe Pink Bubblegum 2", 4599338958981,
  "Marilyn Monroe Pop Art (Blue)", 4599352328325,
  "Marilyn Monroe Pop Art (Orange)", 4599351246981,
  "Pink and Green Marilyn Monroe", 4599344988293,
  "Pink Hat and Blonde Hair - Pop Art", 4585545597061,
  "Polka Dot Woman - Pop Art", 4585536979077,
  "RAWR! (Green) Pop Art", 4585554346117,
  "RAWR! (Natural) Pop Art", 4585564766341,
  "RAWR! (Pink) Pop Art", 4585559556229,
  "RAWR! (Purple) Pop Art", 4585558737029,
  "RAWR! (Red) Pop Art", 4585562833029,
  "Retro Black Bikini", 4599306158213,
  "RAWR! (Yellow) Pop Art", 4585561358469,
  "Red Lips and Polka Dots - Pop Art", 4585505259653,
  "Retro Black Bikini", 4599306158213,
  "Retro Blonde Woman on Red", 4599311630469,
  "Retro Bubble Gum Girl", 4599307075717,
  "Retro Burger", 4599288397957,
  "Retro Fashion Killa", 4599320019077,
  "Retro Girl in Shadows", 4599331094661,
  "Retro Girl in Sunglasses", 4599310123141,
  "Retro Girl in White Hat", 4599322050693,
  "Retro Girl in White Shirt", 4599323721861,
  "Retro Girl on Blue Background", 4599327621253,
  "Retro Girl with Headband", 4599316873349,
  "Retro Green Haired Girl", 4599314022533,
  "Retro Harley Quinn", 4599325393029,
  "Retro Tokyo Hilfiger", 4599304355973,
  "Retro Vampire Girl", 4599318773893,
  "Soundgarden Chris Cornell", 4503068082309,
  "Stevie Ray Vaughan", 4503074472069,
  "Vase with Poppies by Van Gogh", 4591658238085,
  "Winking Woman in Sunglasses - Pop Art", 4585547268229,

  "Floral Design 1", 4523910660229,
  "Floral Design 2", 4523936809093,
  "Floral Design 3", 4523938414725,
  "Floral Design 4", 4523941298309,
  "Floral Design 5", 4523943329925,
  "Floral Design 6", 4523944902789,
  "Floral Design 7", 4523946311813,
  "Floral Design 8", 4523947753605,
  "Floral Design 9", 4523949555845,
  "Floral Design 10", 4523952144517,
  "Floral Design 11", 4523956011141,
  "Floral Design 12", 4523957649541,
  "Floral Design 13", 4523959910533,
  "Floral Design 14", 4523962499205,
  "Floral Design 15", 4523964039301,
  "Floral Design 16", 4523966333061,
  "Floral Design 17", 4523968233605,

  "Geometric Pattern Design 1", 4524046549125,
  "Geometric Pattern Design 2", 4524039569541,
  "Geometric Pattern Design 3", 4524050317445,
  "Geometric Pattern Design 4", 4524052250757,
  "Geometric Pattern Design 5", 4524057165957,
  "Geometric Pattern Design 6", 4524059951237,

  "Japanese Art Design 1", 4528799350917, 
  "Japanese Art Design 2", 4528813703301,
  "Japanese Art Design 3", 4528817406085,
  "Japanese Art Design 4", 4528819142789,
  "Japanese Art Design 5", 4528816029829,
  "Japanese Art Design 6", 4528821436549,
  "Japanese Art Design 7", 4528822780037,
  "Japanese Art Design 8", 4528826613893,
  "Japanese Art Design 9", 4528828055685,
  "Japanese Art Design 10", 4528829792389,
  "Japanese Art Design 11", 4528831529093,
  "Japanese Art Design 12", 4528833003653,
  "Japanese Art Design 13", 4528837066885,
  "Japanese Art Design 14", 4528870785157,
  "Japanese Art Design 15", 4528873504901,
  "Japanese Art Design 16", 4528881238149,
  "Japanese Art Design 17", 4528883236997,

  "Surreal Design 1", 4524244238469,
  "Surreal Design 2", 4524260130949,
  "Surreal Design 3", 4524261671045,
  "Surreal Design 4", 4524264063109,
  "Surreal Design 5", 4524266324101,
  "Surreal Design 6", 4524267765893,
  "Surreal Design 7", 4524269240453,
  "Surreal Design 8", 4524271992965,
  "Surreal Design 9", 4524274090117,
  "Surreal Design 10", 4524275990661,
  "Surreal Design 11", 4524280578181,
  "Surreal Design 12", 4524282675333,
  "Surreal Design 13", 4524283789445,
  "Surreal Design 14", 4524285591685,
  "Surreal Design 15", 4524287787141,
  "Surreal Design 16", 4524289065093,

  "Beastie Boys", 4528657760389,
  "Bono", 4528663134341,
  "Bob Dylan", 4528667426949,
  "Bruce Springsteen", 4528681255045,
  "Johnny Cash", 4528670638213,
  "John Lennon", 4528672866437,
  "Leonard Cohen", 4528675324037,
  "Liam Gallagher", 4528677585029,
  "ZZ Top", 4528684990597,
  "Musicians Set Of 9 Covers", 4528925376645,

  "Seahorse", 4528998613125,
  "Green Seahorse", 4529025777797,
  "Green Coral Design 1", 4529030463621,
  "Green Coral Design 2", 4529032233093,
  "Green Shell", 4529033740421,
  "Green Starfish", 4529034920069,
  "Orange Coral", 4529036689541,
  "Orange Starfish", 4529038327941,
  "Shell", 4529040064645,

  "African Daisy by William Morris", 4591791571077,
  "Almond Blossoms by Van Gogh", 4585281257605,
  "Claude With A Ball by Picasso", 4560285368453,
  "Compton by William Morris", 4591833710725,
  "Courtesan With Necklace Of Gems by Picasso", 4560039084165,
  "Girl Before A Mirror by Picasso", 4560334291077,
  "Harlequin by Picasso", 4560051372165,
  "Harlequin With Guitar by Picasso", 4559937405061,
  "Irises by Van Gogh", 4585278898309,
  "Irises by Van Gogh 2", 4591745958021,
  "La Muse by Picasso", 4560022470789,
  "Les Femmes d'Alger by Picasso", 4560298082437,
  "Les Demoiselles d'Avignon by Picasso", 4559992553605,
  "Marie-Therese Walter by Picasso", 4560292348037,
  "Pomegranate by William Morris", 4591823421573,
  "Portrait of a Young Woman by Sandro Botticelli", 4600496947333,
  "Portrait of Dr. Gachet by Van Gogh", 4585214967941,
  "Portrait of Gertrude Stein by Picasso", 4600502091909,
  "Portrait of the Artist's Father by Albrecht DÃ¼rer", 4600507826309,
  "Purple Vines by William Morris", 4591883976837,
  "Red Leaves by William Morris", 4591893643397,
  "Rose Lattice by William Morris", 4591857139845,
  "Seated Woman by Picasso", 4600581324933,
  "Seaweed by William Morris", 4591818375301,
  "Self Portrait with Bandaged Ear and Pipe by Van Gogh", 4585191833733,
  "Self Portrait by August Macke", 4600513364101,
  "Self Portrait by Van Gogh", 4585223880837,
  "Starry Night by Van Gogh", 4585241313413, 
  "Still Life with French Novels and a Rose by Van Gogh", 4591706996869,
  "Sunflowers by Van Gogh", 4591693660293,
  "The Church at Auvers by Van Gogh", 4585248555141,
  "The Dream by Picasso", 4600571691141,
  "The Mandolin Player by Mary Cassatt", 4600511168645,
  "The Matador by Picasso", 4559959294085,
  "The Mulberry Tree by Van Gogh", 4591690711173,
  "The Night Cafe by Van Gogh", 4585284731013,
  "The Old Guitarist by Picasso", 4559946154117,
  "The Olive Grove by Van Gogh", 4591731966085,
  "The Sculptor by Pablo Picasso", 4600593514629,
  "The Siesta (after Millet) by Van Gogh", 4585264251013,
  "The Yellow House by Van Gogh", 4585287549061,
  "The Yellow Shirt by Picasso", 4560289562757,
  "Three Musicians by Picasso", 4560332226693,
  "Vase with Irises by Van Gogh", 4591670919301,
  "Vase with Pink Roses by Van Gogh", 4591652208773,
  "Vase with Poppies by Van Gogh", 4591658238085,
  "Violin and Grapes by Picasso", 4600574410885,
  "Wheat Field with Cypresses by Van Gogh", 4585267658885,
  "Wheat Field with a Reaper by Van Gogh", 4585269887109,
  "White House at Night by Van Gogh", 4585285877893,
  "Willow Branches by William Morris", 4591846391941,
  "Woman Crying by Picasso", 4559966863493,
  "Woman In A Shawl by Picasso", 4559942910085,

  "Nautical Set of 5 (Design 1)", 4560359686277,
  "Nautical Set of 5 (Design 2)", 4560363225221,
  "Nautical Set of 5 (Design 3)", 4560380788869,
  "Nautical Set of 5 (Design 4)", 4560383082629,
  "Nautical Set of 5 (Design 5)", 4560384589957,
  "Nautical Set of 5 (Design 6)", 4560386130053,
  "Nautical Set of 5 (Design 7)", 4560387408005,
  "Nautical Set of 5 (Design 8)", 4560388784261,

  "As High As Honor (Game Of Thrones)", 4560671867013,
  "Family Duty Honor (Game Of Thrones)", 4560676388997,
  "Fire And Blood (Game Of Thrones)", 4560677798021,
  "Hear Me Roar (Game Of Thrones)", 4560678944901,
  "Our Blades Are Sharp (Game Of Thrones)", 4560683663493,
  "Ours Is The Fury (Game Of Thrones)", 4560688971909,
  "Unbowed Unbent Unbroken (Game Of Thrones)", 4560693297285,
  "We Do Not Sow (Game Of Thrones)", 4560696737925,
  "Winter Is Coming (Game Of Thrones)", 4560700702853,
  "C-3PO (Star Wars)", 4560705683589,
  "Darth Vader (Star Wars)", 4560710271109,
  "Millenium Falcon (Star Wars)", 4560715677829,
  "R2-D2 (Star Wars)", 4560719839365,
  "Walker (Star Wars)", 4560723837061,
  "Star Wars Logo", 4560727933061,
  "Stormtrooper (Star Wars) Design 1", 4560737140869,
  "Stormtrooper (Star Wars) Design 2", 4560742023301,
  "Yoda (Star Wars)", 4560749133957,

  "Basset Hound", 4571817148549,
  "Bichon Frise Design 1", 4571820720261,
  "Bichon Frise Design 2", 4571821441157,
  "Border Collie", 4571822719109,
  "Chihuahua", 4571824521349,
  "Dachshund (Sausage Dog) Design 1", 4571828781189,
  "Dachshund (Sausage Dog) Design 2", 4571831304325,
  "Maltese", 4571833729157,
  "Miniature Schnauzer", 4571835662469,
  "Shih Tzu", 4571838316677,
  "Staffordshire Bull Terrier", 4571838939269,

  "I Am The Cat", 4598518546565,
  "Black Cat Silhouette", 4598514319493,
  "Black Cat with Yarn", 4598540763269,
  "Blue Cat Painting", 4598555836549,
  "Boxing Cat (Design 1)", 4571986526341,
  "Boxing Cat (Design 2)", 4572019818629,
  "Boxing Cat (Design 3)", 4572020637829,
  "Boxing Cat (Design 4)", 4572022046853,
  "Boxing Cat (Design 5)", 4572024275077,
  "Cat World Domination", 4598493839493,
  "Cat World Domination 2", 4598593454213,
  "Floral Cat Collage", 4598426599557,
  "Green Cat Collage", 4598576382085,
  "Grumpy Cat Sketch", 4598544269445,
  "Hipster Cat", 4598546825349,
  "Ninja Cat", 4598520447109,
  "Scattered Cats", 4598485811333,
  "Sepia Cat", 4598559932549,
  "Upper Class Cat", 4598549643397,

  "Flamingo (Design 1)", 4572056027269,
  "Flamingo (Design 2)", 4572057174149,
  "Flamingo (Design 3)", 4572059271301,
  "Flamingo (Design 4)", 4572063629445,
  "Blue Budgie", 4572183822469,
  "Blue Masked Lovebird", 4572187689093,
  "Cockatiel", 4572191490181,
  "Green Parrot", 4572192997509,
  "Orange Parrot", 4572193718405,
  "Kingfisher (Design 1)", 4576155893893,
  "Kingfisher (Design 2)", 4576158056581,
  "Kingfisher (Design 3)", 4576160284805,
  "Kingfisher (Design 4)", 4576163725445,
  "Kingfisher (Design 5)", 4576165363845,

  "Butterflies (Design 1)", 4572238282885,
  "Butterflies (Design 2)", 4572239134853,
  "Butterflies (Design 3)", 4572240117893,
  "Butterflies (Design 4)", 4572241330309,
  "Butterflies (Design 5)", 4572244181125,
  "Butterflies (Design 6)", 4572245033093,
  "Butterflies (Design 7)", 4572248866949,
  "Butterflies (Design 8)", 4572249620613,

  "Cow (Design 1)", 4572262203525,
  "Cow (Design 2)", 4572265316485,
  "Cow (Design 3)", 4572265873541,
  "Cow (Design 4)", 4572266496133,
  "Pig", 4572267151493,
  "Rooster (Design 1)", 4576179912837,
  "Rooster (Design 2)", 4576181026949,
  "Rooster (Design 3)", 4576182698117,

  "Deer", 4576198000773,
  "Elephant (Design 1)", 4576200786053,
  "Elephant (Design 2)", 4576202522757,
  "Lion", 4576204357765,
  "Lion or Tiger", 4576212484229,
  "Tigers (Design 1)", 4576206127237,
  "Tigers (Design 2)", 4576207929477,
  "Tigers (Design 3)", 4576209076357,


  "", ""
  // these empty strings is required as the final element because the last element in the array sometimes gets added to the search results for an unknown reason
  ];


let searchEntryStr;
let uniqueResults;
let nameArray;
let loadingAnimation = document.getElementById('loading');
let collectionComponent = document.getElementById('collection-component')



  // converting all the strings in the cushionCoversIdList array to lowercase
  for(i=0; i<cushionCoversIdList.length; i++) {
    if(typeof cushionCoversIdList[i] === "string") {
      let lowercaseName = cushionCoversIdList[i].toLowerCase();
      cushionCoversIdList.splice(i, 1, lowercaseName);
    }
  }




// controlling appearance of searchbar
const searchBar = document.getElementById('search-field');
const whiteness = document.getElementById('whiteness');
searchBar.addEventListener("click", makeSearchBarBrighter);
searchBar.addEventListener("focusout", makeSearchBarDuller);
function makeSearchBarBrighter() {
    whiteness.style.opacity = "0.84";
    searchBar.style.color = "rgb(0,0,0,0.73)";
}
function makeSearchBarDuller() {
    whiteness.style.opacity = "0";
}




// hiding the collection component for certain pages, and changing the styling of the search suggestions for certain pages
if(pageID === "Home" || pageID === "Browse By Category" || pageID === "Animals") {
    document.getElementById('collection-component').style.display = "none";
    document.getElementById('large-white-box').style.display = "none";
    document.getElementById("search-results").style.backdropFilter = "blur(40px)";
    document.getElementById("search-results").style.backgroundColor = "rgb(0,0,0,0.05)";
}




// controlling the mouseover behaviour of the buttons in the top right of the screen
let shippingCircle = document.getElementById('shipping-circle');
let contactCircle = document.getElementById('contact-circle');
let facebookCircle = document.getElementById('instagram-circle');
shippingCircle.addEventListener("mouseover", onMouseoverShippingCircle);
shippingCircle.addEventListener("mouseleave", onMouseleaveShippingCircle);
contactCircle.addEventListener("mouseover", onMouseoverContactCircle);
contactCircle.addEventListener("mouseleave", onMouseleaveContactCircle);
function onMouseoverShippingCircle() {
    hideContactCircle();
    // hideFacebookCircle();
    shippingCircle.style.background = "rgb(210,237,246)";
    shippingCircle.style.transition = "clip-path 0.67s 100ms ease-in-out, background 500ms 0s ease-in-out";
}
function onMouseleaveShippingCircle() {
    showContactCircle();
    // showFacebookCircle();
    shippingCircle.style.background = "0";
    shippingCircle.style.transition = "clip-path 0.8s ease-in-out, background 550ms 0.35s ease-in-out";
}
function onMouseoverContactCircle() {
    hideFacebookCircle();
    contactCircle.style.background = "rgb(210,237,246)";
    contactCircle.style.transition = "clip-path 0.67s 100ms ease-in-out, background 500ms 0s ease-in-out";
}
function onMouseleaveContactCircle() {
    showFacebookCircle();
    contactCircle.style.background = "0";
    contactCircle.style.transition = "clip-path 0.8s ease-in-out, background 550ms 0.35s ease-in-out";
}
function hideContactCircle() {
    contactCircle.style.opacity = "0";
    contactCircle.style.transition = "clip-path 0.8s ease-in-out, opacity 0.15s ease-in-out, background 1s ease-in-out";
}
function showContactCircle() {
    contactCircle.style.opacity = "1";
    contactCircle.style.transition = "clip-path 0.8s ease-in-out, opacity 0.4s 0.3s ease, background 1s ease-in-out";
}
function hideFacebookCircle() {
    facebookCircle.style.opacity = "0";
    facebookCircle.style.transition = "opacity 0.15s ease-in-out, background 0.2s ease-in-out";
}
function showFacebookCircle() {
    facebookCircle.style.opacity = "1";
    facebookCircle.style.transition = "opacity 0.4s 0.3s ease, background 0.2s ease-in-out";
}




// controlling what happens when a user clicks one of the search suggestions
let searchResult1 = document.getElementById('search-result-1');
let searchResult2 = document.getElementById('search-result-2');
let searchResult3 = document.getElementById('search-result-3');
let searchResult4 = document.getElementById('search-result-4');
let searchResult5 = document.getElementById('search-result-5');
let searchResult6 = document.getElementById('search-result-6');
let searchResult7 = document.getElementById('search-result-7');
searchResult1.style.display = "none";
searchResult2.style.display = "none";
searchResult3.style.display = "none";
searchResult4.style.display = "none";
searchResult5.style.display = "none";
searchResult6.style.display = "none";
searchResult7.style.display = "none";
document.getElementById("search-result-1").addEventListener("click", grabAndSearch);
document.getElementById("search-result-2").addEventListener("click", grabAndSearch);
document.getElementById("search-result-3").addEventListener("click", grabAndSearch);
document.getElementById("search-result-4").addEventListener("click", grabAndSearch);
document.getElementById("search-result-5").addEventListener("click", grabAndSearch);
document.getElementById("search-result-6").addEventListener("click", grabAndSearch);
document.getElementById("search-result-7").addEventListener("click", grabAndSearch);
document.body.addEventListener('click', searchResultCloser);
function grabAndSearch(e) {
    var searchSuggestion = e.target.innerHTML;
    searchBar.value = searchSuggestion;
    searchEntryStr = searchSuggestion;
    runSearch();
    displaySearch();
    searchResultCloser();
}
function searchResultCloser(){
    searchResult1.style.display = "none";
    searchResult2.style.display = "none";
    searchResult3.style.display = "none";
    searchResult4.style.display = "none";
    searchResult5.style.display = "none";
    searchResult6.style.display = "none";
    searchResult7.style.display = "none";
    searchBar.style.borderRadius = "10px";
    whiteness.style.borderRadius = "10px";
}




// controlling when the footer is displayed
let footer = document.getElementById('footer');
if(pageID === "Shipping & Payment" || pageID === "About Us" || pageID === "Contact" || pageID === "Cookies Policy") {
    footer.style.display = "block";
}
// the following ResizeObserver ensures that the footer only loads after the products have loaded. It observes a change in height of
// the collectionComponent when the products load
const observer = new ResizeObserver(entries => {
    for (let entry of entries) {
      if(entry.contentRect.height > 0) {
        footer.style.display = "block";
      }
    }
});
observer.observe(collectionComponent);




searchBar.addEventListener('keyup', performSearch);   
function performSearch(e) {
    runSearch();
    var x = e.keyCode;

    if (x === 13) {
        displaySearch();
        searchResultCloser();
    }
}
function runSearch() {
    searchEntryStr = searchBar.value;
    const searchEntryStrLowerCase = searchEntryStr.toLowerCase();
    const searchEntryArr = searchEntryStrLowerCase.split(' ');
    var searchResultsProductNames = [];
    var searchResultsProductIds = [];
    var finalSearchResults = [];

    for(i=0; i<cushionCoversIdList.length; i+=2) {
        let cushionName = cushionCoversIdList[i];
        let cushionId = cushionCoversIdList[i+1];

        for(j=0; j<searchEntryArr.length; j++) {
            let searchWord = searchEntryArr[j];
            if(cushionName.indexOf(searchWord) != -1){
                searchResultsProductNames.push(cushionName);
                searchResultsProductNames.push(cushionId);
            }
        }

        for(j=0; j<searchEntryArr.length; j++) {
            for(k=0; k<searchResultsProductNames.length; k+=2) {
                let searchWord = searchEntryArr[j];
                let searchResult = searchResultsProductNames[k];
                if(searchResult.indexOf(searchWord) === -1) {
                  searchResultsProductNames.splice(k, 2);
                }
            }
        }
    }

    // remove duplicate search results
    uniqueResults = [...new Set(searchResultsProductNames)];
    nameArray = [...uniqueResults];

    // remove IDs from the array so that it just contains the product names
    for(i=nameArray.length; i>=0; i--) {
      if(typeof nameArray[i] === "number") {
        nameArray.splice(i,1);

        if(i>14) {
          nameArray.splice(i,1);
        }
      }
    }

    // remove product names from the array so that it just contains the product IDs
    for(i=0; i<uniqueResults.length; i++) {
      if(typeof uniqueResults[i] === "string") {
        uniqueResults.splice(i,1);
      }
    }

    searchResult1.innerHTML = nameArray[0];
    searchResult2.innerHTML = nameArray[1];
    searchResult3.innerHTML = nameArray[2];
    searchResult4.innerHTML = nameArray[3];
    searchResult5.innerHTML = nameArray[4];
    searchResult6.innerHTML = nameArray[5];
    searchResult7.innerHTML = nameArray[6];


    if(nameArray.length === 0) {
      searchResultCloser();      
    }
    if(nameArray.length === 1) {
      searchResult1.style.display = "block";
      searchResult2.style.display = "none";
      searchResult3.style.display = "none";
      searchResult4.style.display = "none";
      searchResult5.style.display = "none";
      searchResult6.style.display = "none";
      searchResult7.style.display = "none";
    }
    if(nameArray.length === 2) {
      searchResult1.style.display = "block";
      searchResult2.style.display = "block";
      searchResult3.style.display = "none";
      searchResult4.style.display = "none";
      searchResult5.style.display = "none";
      searchResult6.style.display = "none";
      searchResult7.style.display = "none";
    }
    if(nameArray.length === 3) {
      searchResult1.style.display = "block";
      searchResult2.style.display = "block";
      searchResult3.style.display = "block";
      searchResult4.style.display = "none";
      searchResult5.style.display = "none";
      searchResult6.style.display = "none";
      searchResult7.style.display = "none";
    }
    if(nameArray.length === 4) {
      searchResult1.style.display = "block";
      searchResult2.style.display = "block";
      searchResult3.style.display = "block";
      searchResult4.style.display = "block";
      searchResult5.style.display = "none";
      searchResult6.style.display = "none";
      searchResult7.style.display = "none";
    }
    if(nameArray.length === 5) {
      searchResult1.style.display = "block";
      searchResult2.style.display = "block";
      searchResult3.style.display = "block";
      searchResult4.style.display = "block";
      searchResult5.style.display = "block";
      searchResult6.style.display = "none";
      searchResult7.style.display = "none";
    }
    if(nameArray.length === 6) {
      searchResult1.style.display = "block";
      searchResult2.style.display = "block";
      searchResult3.style.display = "block";
      searchResult4.style.display = "block";
      searchResult5.style.display = "block";
      searchResult6.style.display = "block";
      searchResult7.style.display = "none";
    }
    if(nameArray.length >= 7) {
      searchResult1.style.display = "block";
      searchResult2.style.display = "block";
      searchResult3.style.display = "block";
      searchResult4.style.display = "block";
      searchResult5.style.display = "block";
      searchResult6.style.display = "block";
      searchResult7.style.display = "block";
    }
    if(nameArray.length >= 1) {
      searchBar.style.borderRadius = "10px 10px 0px 0px";
      whiteness.style.borderRadius = "10px 10px 0px 0px";
    }
    if(searchEntryStr.length === 0) {
      searchResultCloser();
    }
}


document.getElementById("search-icon").addEventListener('click', displaySearch);

function displaySearch() {

    footer.style.display = "none";
    footer.style.top = "186px";
    loadingAnimation.style.display = "block";
    loadingAnimation.style.top = "120px";
    searchBar.style.color = "rgb(0,0,0,0.5";
    document.getElementById("search-results").style.backdropFilter = "blur(60px)";
    document.getElementById("search-results").style.backgroundColor = "rgb(0,0,0,0.15)";
    document.getElementById('text-container').style.display = "none"; 

    if(pageID === "Home" || pageID === "Browse By Category" || pageID === "Shipping & Payment" || pageID === "Animals" || pageID === "About Us" || pageID === "Contact" || pageID === "Cookies Policy") {
          document.getElementById('collection-component').style.display = "block";
          document.getElementById('large-white-box').style.display = "block";
    }

    if(pageID === "Browse By Category" || pageID === "Animals") {
          document.getElementById('browse-page-contents').style.display = "none";
    }

    if(pageID === "Home") {
          document.getElementById('homepage-contents').style.display = "none";
    }

    if(pageID === "Shipping & Payment" || pageID === "About Us" || pageID === "Contact" || pageID === "Cookies Policy") {
          document.getElementById('shipping-page-contents').style.display = "none";
    }


    // what happens if no search results are found
    if(uniqueResults.length === 0) {
      loadingAnimation.style.display = "none";
      document.getElementById('breadcrumbs').style.visibility = "hidden";
      document.getElementById('search-results-text').innerHTML = "";
      document.getElementById('search-results-text-unsuccessful').style.display = "block";
      document.getElementById('go-back-message').style.display = "block";
      document.getElementById('go-back-message').innerHTML = '<i class="fa fa-chevron-left" aria-hidden="true"></i>' + '&nbsp;' + 'Back to ' + pageID;
      document.getElementById('search-results-text-unsuccessful').innerHTML = 
      `<span id="sorry">Sorry we couldn't find anything to match your search  <br>"` + searchEntryStr + '"</span>' 
      + "<br><br><br>Can't find what you're looking for? <br>Why not <a href='create-your-own.html' id='create-your-own'>Create Your Own?</a>";
      document.getElementById('footer').style.display = "block";
      document.getElementById('footer').style.top = "572px";
      document.getElementById('go-back').setAttribute('href', pageLink);
    }

    // display text showing how many search results were found
    if(uniqueResults.length > 0) {
      document.getElementById('search-results-text-unsuccessful').innerHTML = "";
      document.getElementById('search-results-text-unsuccessful').style.display = "none";
    }

    let results = "results";

    if(uniqueResults.length === 1) {
      results = "result";
    }

    // clear the screen before rendering content
    document.getElementById('collection-component').innerHTML = "";

    let productSetOrCollection = "productSet"

    if(searchEntryStr.length === 0) {
        uniqueResults = collectionID;
        productSetOrCollection = "collection";
        document.getElementById('breadcrumbs').style.visibility = "visible";
        document.getElementById('go-back-message').style.display = "none";
        document.getElementById('search-results-text').innerHTML = "";
        document.getElementById('text-container').style.display = "block";   
        footer.style.display = "block";

      if(pageID === "Home" || pageID === "Browse By Category" || pageID === "Animals") {
        document.getElementById('breadcrumbs').style.visibility = "hidden";
        document.getElementById('go-back-message').style.display = "none";
        document.getElementById('search-results-text').innerHTML = "";
        document.getElementById('text-container').style.display = "none"; 
        document.getElementById('collection-component').style.display = "none";
        document.getElementById('large-white-box').style.display = "none";
        footer.style.display = "none";
      }

      if(pageID === "Browse By Category" || pageID === "Animals") {
            document.getElementById('browse-page-contents').style.display = "block";
      }

      if(pageID === "Home") {
            document.getElementById('homepage-contents').style.display = "block";
      }

      if(pageID === "Shipping & Payment" || pageID === "About Us" || pageID === "Contact" || pageID === "Cookies Policy") {
        document.getElementById('shipping-page-contents').style.display = "block";
        document.getElementById('go-back-message').style.display = "none";
        document.getElementById('search-results-text').innerHTML = "";
        document.getElementById('text-container').style.display = "none"; 
      }
  }

    // function to load search results
    if(uniqueResults.length>0) {
      (function () {
          document.getElementById('go-back-message').style.display = "none";
          if(searchEntryStr) {
              document.getElementById('search-results-text').innerHTML = 'Showing ' + uniqueResults.length + 
              ' search ' + results + ' for "' + searchEntryStr + '"';

              document.getElementById('breadcrumbs').style.visibility = "hidden";
          }
          else {
              document.getElementById('search-results-text').innerHTML = "";
          }
          var scriptURL = 'https://sdks.shopifycdn.com/buy-button/latest/buy-button-storefront.min.js';
          if (window.ShopifyBuy) {
            if (window.ShopifyBuy.UI) {
              ShopifyBuyInit();
            } else {
              loadScript();
            }
          } else {
            loadScript();
          }
          function loadScript() {
            script = document.createElement('script');
            script.async = true;
            script.src = scriptURL;
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(script);
            // script.onprogress = loading();
            script.onload = ShopifyBuyInit;
          }
          function ShopifyBuyInit() {
            var client = ShopifyBuy.buildClient({
              domain: 'spacebutterflyuk.myshopify.com',
              storefrontAccessToken: '38f835659431459cebffcd078fa762c4',
            });
            ShopifyBuy.UI.onReady(client).then(function (ui) {
              ui.createComponent(productSetOrCollection, {
                id: uniqueResults,
                node: document.getElementById('collection-component'),
                moneyFormat: '%C2%A3%7B%7Bamount%7D%7D',
                options: {
          "product": {
            "styles": {
              "user-select": "none",
              "product": {
                "@media (min-width: 601px)": {
                  "max-width": "calc(33.33333% - 30px)",
                  "margin-left": "30px",
                  "margin-bottom": "50px",
                  "width": "calc(33.33333% - 30px)"
                },
                "img": {
                  "height": "calc(100% - 15px)",
                  "position": "absolute",
                  "left": "0",
                  "right": "0",
                  "top": "0"
                },
                "imgWrapper": {
                  "padding-top": "calc(75% + 15px)",
                  "position": "relative",
                  "height": "0"
                }
              },
              "title": {
                "font-family": "futura, sans-serif",
                "color": "#1e3264",
                "font-weight": "400",
                "font-size": "18px"
              },
              "button": {
                // "opacity": "0",
                "font-family": "futura, sans-serif",
                "font-weight": "bold",
                "color": "white",
                "font-size": "12px",
                ":hover": {
                  "color": "#115500",
                  "background-color": "#0f4d00"
                },
                "background-color": "black",
                ":focus": {
                  "background-color": "#0f4d00"
                },
                "border-radius": "1px",
                "padding-left": "15px",
                "padding-right": "15px"
              },
              "price": {
                "font-family": "futura, sans-serif",
                // "font-weight": "bold",
                "color": "#1e3264"
              },
              "compareAt": {
                "font-family": "futura, sans-serif",
                // "font-weight": "bold",
                "color": "#1e3264"
              },
              "unitPrice": {
                "font-family": "futura, sans-serif",
                "font-weight": "bold",
                "color": "#1e3264"
              },
              "description": {
                "font-family": "futura, sans-serif",
                "color": "#c92929"
              },
            },
            "buttonDestination": "modal",
            "contents": {
              "options": false,
              "button": false,
            },
                  "isButton": "true",


            "text": {
              "button": "View product"
            },

            "googleFonts": [
              "futura"
            ]
          },
          "productSet": {
            "styles": {
              "products": {
                "@media (min-width: 601px)": {
                  "margin-left": "-30px"
                }
              }
            }
          },
          "modalProduct": {
            "contents": {
              "img": false,
              "imgWithCarousel": true
            },
            "styles": {
              "product": {
                "@media (min-width: 601px)": {
                  "max-width": "100%",
                  "margin-left": "0px",
                  "margin-bottom": "0px",
                  "user-select": "none"
                }
              },
              "img": {
                "width": "400px",
              },
              "button": {
                // "background-image": "linear-gradient(to right, #eea2a2 0%, #bbc1bf 19%, #57c6e1 42%, #b49fda 79%, #7ac5d8 100%);",
                "background-image": "black",
                "font-size": "12px",
                // "font-weight": "500",
                "font-family": "futura, sans-serif",
                "color": "white",
                ":hover": {
                  "color": "#1e3264",
                  "background-color": "#0f4d00"
                },
                "background-color": "#115500",
                ":focus": {
                  "background-color": "#0f4d00"
                },
                "border-radius": "0px",
                "padding": "15px 105px 15px 105px",
              },
              "title": {
                "font-family": "futura, sans-serif",
                "font-size": "26px",
                "font-weight": "normal",
                "color": "#1e3264"
              },
              "price": {
                "font-family": "futura, sans-serif",
                "font-size": "16px",
                "color": "#1e3264"
              },
              "compareAt": {
                "font-family": "futura, sans-serif",
                "font-size": "12px",
                "color": "#1e3264"
              },
              "unitPrice": {
                "font-family": "futura, sans-serif",
                "color": "#1e3264"
              },
              "description": {
                "font-family": "futura, sans-serif",
                "font-size": "16px",
                "color": "#1e3264"
              }
            },
            "googleFonts": [
              "futura"
            ],
            "text": {
              "button": "ADD TO CART",
            }
          },
          "modal": {
            "styles": {
              "modal": {
                // "outline": "10px solid red",
                "user-select": "none",
                "background-color": "white",
                // "border": "30px solid black",
                "border-radius": "15px",
                "box-shadow": "0px 0px 100px rgba(0,0,0,0.2)"

              }
            }
          },
          "cart": {
            "styles": {
              "button": {
                "font-family": "futura, sans-serif",
                // "font-weight": "bold",
                "color": "white",
                ":hover": {
                  "color": "#black",
                  "background-color": "#black"
                },
                "background-color": "rgb(0,0,0,0.9)",
                ":focus": {
                  "background-color": "black"
                },
                "border-radius": "0px"
              },
              "title": {
                "color": "#353535"
              },
              "header": {
                "color": "#353535"
              },
              "lineItems": {
                "color": "#353535"
              },
              "subtotalText": {
                "color": "#353535"
              },
              "subtotal": {
                "color": "#353535"
              },
              "notice": {
                "color": "#353535"
              },
              "currency": {
                "color": "#353535"
              },
              "close": {
                "color": "#353535",
                ":hover": {
                  "color": "#353535"
                }
              },
              "empty": {
                "color": "#353535"
              },
              "noteDescription": {
                "color": "#353535"
              },
              "discountText": {
                "color": "#353535"
              },
              "discountIcon": {
                "fill": "#353535"
              },
              "discountAmount": {
                "color": "#353535"
              }
            },
            "text": {
              "total": "Subtotal",
              "button": "Checkout"
            },
            "googleFonts": [
              "futura"
            ]
          },
          "toggle": {
            "styles": {
              "toggle": {
                "font-family": "futura, sans-serif",
                // "font-weight": "bold",
                "background-color": "#c3f0c8",
                "border-radius": "0px",
                // "position": "fixed",
                // "top": "-100px",
                ":hover": {
                "background-color": "#c3f0c8",
                "filter": "brightness(1.1)"
                },
                ":focus": {
                  "background-color": "#0f4d00"
                }
              },
              "count": {
                "color": "#1e3264",
              },
              "iconPath": {
                "fill": "#1e3264"
              }
            },
            "googleFonts": [
              "futura"
            ]
          },
          "lineItem": {
            "styles": {
              "variantTitle": {
                "color": "#353535"
              },
              "title": {
                "color": "#353535"
              },
              "price": {
                "color": "#353535"
              },
              "fullPrice": {
                "color": "#353535"
              },
              "discount": {
                "color": "#353535"
              },
              "discountIcon": {
                "fill": "#353535"
              },
              "quantity": {
                "color": "#353535"
              },
              "quantityIncrement": {
                "color": "#353535",
                "border-color": "#353535"
              },
              "quantityDecrement": {
                "color": "#353535",
                "border-color": "#353535"
              },
              "quantityInput": {
                "color": "#353535",
                "border-color": "#353535"
              }
            }
          }
        },
              });
            });
          }
        })();

// The following curly brace goes with the if statement that wraps around the IIFE
}

// The following curly brace and bracket go with the keydown event listener
};




// the following IIFE initiliases the shopify component

(function () {

          if(pageID != "Home" && pageID != "Browse By Category" && pageID != "Animals" && pageID != "Shipping & Payment" && pageID != "About Us" && pageID != "Contact") {
              loadingAnimation.style.display = "block";
          }

          var scriptURL = 'https://sdks.shopifycdn.com/buy-button/latest/buy-button-storefront.min.js';
          if (window.ShopifyBuy) {
            if (window.ShopifyBuy.UI) {
              ShopifyBuyInit();
            } else {
              loadScript();
            }
          } else {
            loadScript();
          }
          function loadScript() {
            // function loading() {
          // document.getElementById('collection-component').innerHTML = "Loading";
            // }
            script = document.createElement('script');
            script.async = true;
            script.src = scriptURL;
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(script);
            // script.onprogress = loading();
            script.onload = ShopifyBuyInit;
          }
          function ShopifyBuyInit() {
                document.getElementById('collection-component').innerHTML = "";

            // (document.getElementsByTagName('head')[0]).replaceChild(script, "0");
            var client = ShopifyBuy.buildClient({
              domain: 'spacebutterflyuk.myshopify.com',
              storefrontAccessToken: '38f835659431459cebffcd078fa762c4',
            });
            ShopifyBuy.UI.onReady(client).then(function (ui) {
              // ui.replaceComponent('productSet');
              ui.createComponent('productSet', {
                id: collectionID,
                node: document.getElementById('collection-component'),
                moneyFormat: '%C2%A3%7B%7Bamount%7D%7D',
                options: {
          "product": {
            "styles": {
              "user-select": "none",
              "product": {
                "@media (min-width: 601px)": {
                  "max-width": "calc(33.33333% - 30px)",
                  "margin-left": "30px",
                  "margin-bottom": "50px",
                  "width": "calc(33.33333% - 30px)"
                },
                "img": {
                  "height": "calc(100% - 15px)",
                  "position": "absolute",
                  "left": "0",
                  "right": "0",
                  "top": "0"
                },
                "imgWrapper": {
                  "padding-top": "calc(75% + 15px)",
                  "position": "relative",
                  "height": "0"
                }
              },
              "title": {
                "font-family": "futura, sans-serif",
                "color": "#1e3264",
                "font-weight": "400",
                "font-size": "18px"
              },
              "button": {
                // "opacity": "0",
                "font-family": "futura, sans-serif",
                // "font-weight": "bold",
                "color": "black",
                "font-size": "15px",
                ":hover": {
                  "color": "white",
                  "background-color": "black"
                },
                "background-color": "white",
                ":focus": {
                  "color": "white",
                  "background-color": "black",
                  "outline": "0",
                },
                "border-radius": "4px",
                "border": "2px solid black",
                "padding-left": "15px",
                "padding-right": "15px",
              },
              "price": {
                "font-family": "futura, sans-serif",
                // "font-weight": "bold",
                "color": "#1e3264"
              },
              "compareAt": {
                "font-family": "futura, sans-serif",
                // "font-weight": "bold",
                "color": "#1e3264"
              },
              "unitPrice": {
                "font-family": "futura, sans-serif",
                "font-weight": "bold",
                "color": "#1e3264"
              },
              "description": {
                "font-family": "futura, sans-serif",
                "color": "#c92929"
              },
            },
            "buttonDestination": "modal",
            "contents": {
              "options": false,
              "button": false,
            },
                  "isButton": "true",


            "text": {
              "button": "View product"
            },

            "googleFonts": [
              "futura"
            ]
          },
          "productSet": {
            "styles": {
              "products": {
                "@media (min-width: 601px)": {
                  "margin-left": "-30px"
                }
              }
            }
          },
          "modalProduct": {
            "contents": {
              "img": false,
              "imgWithCarousel": true
            },
            "styles": {
              "product": {
                "@media (min-width: 601px)": {
                  "max-width": "100%",
                  "margin-left": "0px",
                  "margin-bottom": "0px",
                  "user-select": "none"
                }
              },
              // "img": {
              //   "width": "400px",
              // },
              "button": {
                // "position": "absolute",
                // "bottom": "100px",
                // "background-image": "linear-gradient(to right, #eea2a2 0%, #bbc1bf 19%, #57c6e1 42%, #b49fda 79%, #7ac5d8 100%);",
                "border": "1px solid black",
                "font-size": "12px",
                // "font-weight": "500",
                "font-family": "futura, sans-serif",
                "color": "white",
                ":hover": {
                  "color": "rgb(17,17,17)",
                  "background-color": "white"
                },
                "background-color": "rgb(17,17,17)",
                ":focus": {
                  "background-color": "#0f4d00"
                },
                "border-radius": "0px",
                "padding-left": "15px",
                "padding-right": "15px",
              },
              "title": {
                "font-family": "futura, sans-serif",
                "font-size": "26px",
                "font-weight": "normal",
                "color": "#1e3264"
              },
              "price": {
                "font-family": "futura, sans-serif",
                "font-size": "16px",
                "color": "#1e3264"
              },
              "compareAt": {
                "font-family": "futura, sans-serif",
                "font-size": "12px",
                "color": "#1e3264"
              },
              "unitPrice": {
                "font-family": "futura, sans-serif",
                "color": "#1e3264"
              },
              "description": {
                "font-family": "futura, sans-serif",
                "font-size": "16px",
                "color": "#1e3264"
              }
            },
            "googleFonts": [
              "futura"
            ],
            "text": {
              "button": "ADD TO CART",
            }
          },
          "modal": {
            "styles": {
              "modal": {
                // "user-select": "none",
                "background-color": "white",
                // "border": "30px solid black",
                // "border-radius": "15px",
                // "box-shadow": "0px 0px 100px rgba(0,0,0,0.2)"

              }
            }
          },
          "cart": {
            "styles": {
              "button": {
                "font-family": "futura, sans-serif",
                // "font-weight": "bold",
                "color": "white",
                ":hover": {
                  "color": "white",
                  "background-color": "black"
                },
                "background-color": "rgb(0,0,0,0.9)",
                ":focus": {
                  "background-color": "black"
                },
                "border-radius": "0px"
              },
              "title": {
                "color": "#353535"
              },
              "header": {
                "color": "#353535"
              },
              "lineItems": {
                "color": "#353535"
              },
              "subtotalText": {
                "color": "#353535"
              },
              "subtotal": {
                "color": "#353535"
              },
              "notice": {
                "color": "#353535"
              },
              "currency": {
                "color": "#353535"
              },
              "close": {
                "color": "#353535",
                ":hover": {
                  "color": "#353535"
                }
              },
              "empty": {
                "color": "#353535"
              },
              "noteDescription": {
                "color": "#353535"
              },
              "discountText": {
                "color": "#353535"
              },
              "discountIcon": {
                "fill": "#353535"
              },
              "discountAmount": {
                "color": "#353535"
              }
            },
            "text": {
              "total": "Subtotal",
              "button": "Checkout"
            },
            "googleFonts": [
              "futura"
            ]
          },
          "toggle": {
            "styles": {
              "toggle": {
                "font-family": "futura, sans-serif",
                // "font-weight": "bold",
                "background-color": "#c3f0c8",
                "border-radius": "0px",
                // "position": "fixed",
                // "top": "-100px",
                ":hover": {
                "background-color": "#c3f0c8",
                "filter": "brightness(1.1)"
                },
                ":focus": {
                  "background-color": "#0f4d00"
                }
              },
              "count": {
                "color": "#1e3264",
              },
              "iconPath": {
                "fill": "#1e3264"
              }
            },
            "googleFonts": [
              "futura"
            ]
          },
          "lineItem": {
            "styles": {
              "variantTitle": {
                "color": "#353535"
              },
              "title": {
                "color": "#353535"
              },
              "price": {
                "color": "#353535"
              },
              "fullPrice": {
                "color": "#353535"
              },
              "discount": {
                "color": "#353535"
              },
              "discountIcon": {
                "fill": "#353535"
              },
              "quantity": {
                "color": "#353535"
              },
              "quantityIncrement": {
                "color": "#353535",
                "border-color": "#353535"
              },
              "quantityDecrement": {
                "color": "#353535",
                "border-color": "#353535"
              },
              "quantityInput": {
                "color": "#353535",
                "border-color": "#353535"
              }
            }
          }
        },

              });
            }); 
          }
        })();






